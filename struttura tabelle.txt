BEGIN TRANSACTION;
CREATE TABLE IF NOT EXISTS "Utenti" (
	"Email"	TEXT,
	"Password"	TEXT,
	"Nome"	TEXT
);
CREATE TABLE IF NOT EXISTS "Tipologia" (
	"ID"	INTEGER,
	"Tipologia"	TEXT NOT NULL UNIQUE,
	PRIMARY KEY("ID" AUTOINCREMENT)
);
CREATE TABLE IF NOT EXISTS "Associazioni" (
	"ID"	INTEGER,
	"ID_TIPOLOGIA"	INTEGER NOT NULL,
	"COLONNA3"	TEXT,
	"TAVOLO"	INTEGER NOT NULL CHECK("TAVOLO" IN (0, 1)),
	"DIRETTIVO_DELEGAZIONE"	INTEGER NOT NULL CHECK("DIRETTIVO_DELEGAZIONE" IN (0, 1)),
	"SOGGETTO"	TEXT NOT NULL UNIQUE,
	"MAIL"	TEXT,
	"PEC"	TEXT,
	PRIMARY KEY("ID" AUTOINCREMENT),
	FOREIGN KEY("ID_TIPOLOGIA") REFERENCES "Tipologia"("ID") ON UPDATE CASCADE ON DELETE RESTRICT
);
CREATE TABLE IF NOT EXISTS "Referenti" (
	"ID"	INTEGER,
	"ID_Associazione"	INTEGER NOT NULL,
	"Nome"	TEXT NOT NULL,
	"MAILREFERENTE"	TEXT,
	PRIMARY KEY("ID" AUTOINCREMENT),
	UNIQUE("ID_Associazione","Nome"),
	FOREIGN KEY("ID_Associazione") REFERENCES "Associazioni"("ID") ON UPDATE CASCADE ON DELETE CASCADE
);
CREATE TABLE IF NOT EXISTS "AltriSoggetti" (
	"ID"	INTEGER,
	"ID_Associazione"	INTEGER NOT NULL,
	"Nome"	TEXT NOT NULL,
	"MAILALTRISOGGETTI"	TEXT,
	PRIMARY KEY("ID" AUTOINCREMENT),
	UNIQUE("ID_Associazione","Nome"),
	FOREIGN KEY("ID_Associazione") REFERENCES "Associazioni"("ID") ON UPDATE CASCADE ON DELETE CASCADE
);
CREATE TABLE IF NOT EXISTS "Agora" (
	"ID"	INTEGER NOT NULL,
	"Data"	TEXT NOT NULL,
	"Evento"	TEXT,
	"ODG"	TEXT,
	"Verbale"	TEXT,
	"Documenti"	TEXT,
	PRIMARY KEY("ID")
);
COMMIT;
